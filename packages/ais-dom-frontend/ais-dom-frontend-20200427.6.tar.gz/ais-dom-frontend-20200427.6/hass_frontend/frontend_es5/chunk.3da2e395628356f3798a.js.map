{"version":3,"sources":["webpack:///./src/panels/lovelace/cards/hui-ais-light-card.js"],"names":["ColorLite","HTMLElement","hass","onTap","this","config","tap_action","callService","entity_id","entity","fireEvent","entityId","_get","_getPrototypeOf","prototype","call","Error","content","card","document","createElement","appendChild","style","addEventListener","_onClick","_onDbClick","entityClass","replace","setAttribute","state","states","imageOn","image_on","imageOff","image_off","rgbval","attributes","rgb_color","hsval","hs_color","hsar","bbrite","brightness","innerHTML","concat","customElements","define"],"mappings":"8wEAEMA,sPAAkBC,8NAkDbC,GACP,IAAMC,EAAQC,KAAKC,OAAOC,YAAc,SACxCJ,EAAKK,YAAY,QAASJ,EAAO,CAC/BK,UAAWJ,KAAKC,OAAOI,8CAKzBC,YAAUN,KAAM,iBAAkB,CAChCO,SAAUP,KAAKC,OAAOI,yCAKxBG,EAAAC,EAAAb,EAAAc,WAAA,QAAAV,MAAAW,KAAAX,wCAGQC,GACR,IAAKA,EAAOI,OACV,MAAM,IAAIO,MAAM,gCAElBZ,KAAKC,OAASA,wCAId,OAAO,6BA1EAH,GACP,IAAKE,KAAKa,QAAS,CACjB,IAAMC,EAAOC,SAASC,cAAc,WACpChB,KAAKa,QAAUE,SAASC,cAAc,OACtCF,EAAKG,YAAYjB,KAAKa,SACtBC,EAAKI,MACH,yEACFlB,KAAKiB,YAAYH,GACjBd,KAAKmB,iBAAiB,QAAS,WAC7BnB,KAAKoB,SAAStB,KAEhBE,KAAKmB,iBAAiB,WAAY,WAChCnB,KAAKqB,eAIT,IAAMd,EAAWP,KAAKC,OAAOI,OACvBiB,EACJtB,KAAKC,OAAL,OAAqBD,KAAKC,OAAOI,OAAOkB,QAAQ,IAAK,KACvDvB,KAAKwB,aAAa,QAASF,GAC3B,IAAMG,EAAQ3B,EAAK4B,OAAOnB,GACpBoB,EACJ3B,KAAKC,OAAO2B,UAAY,2CACpBC,EACJ7B,KAAKC,OAAO6B,WAAa,4CAE3B,GAAIL,EACF,GAAoB,OAAhBA,EAAMA,MAAgB,CACxB,IAAIM,EAASN,EAAMO,WAAWC,UAC1BC,EAAQT,EAAMO,WAAWG,SACzBC,EAAO,GACPF,GACa,gBAAXH,IACFK,EAAO,eAAiBF,EAAM,GAAK,QAGvC,IACIG,EADUZ,EAAMO,WAAWM,WACR,IAEvBtC,KAAKa,QAAQ0B,UAAb,aAAAC,OAAsCb,EAAtC,iDAAAa,OAA6FH,EAA7F,MAAAG,OAAwGJ,EAAxG,sBAGApC,KAAKa,QAAQ0B,UAAb,aAAAC,OAAsCX,EAAtC,aAAAW,OAA0DlB,EAA1D,wCAGFtB,KAAKa,QAAQ0B,UAAb,aAAAC,OAAsCX,EAAtC,aAAAW,OAA0DlB,EAA1D,uEAiCNmB,eAAeC,OAAO,qBAAsB9C","file":"chunk.3da2e395628356f3798a.js","sourcesContent":["import { fireEvent } from \"../../../common/dom/fire_event\";\n\nclass ColorLite extends HTMLElement {\n  set hass(hass) {\n    if (!this.content) {\n      const card = document.createElement(\"ha-card\");\n      this.content = document.createElement(\"div\");\n      card.appendChild(this.content);\n      card.style =\n        \"background:none; width: 110px; border-radius: 52.5px; cursor: pointer;\";\n      this.appendChild(card);\n      this.addEventListener(\"click\", function() {\n        this._onClick(hass);\n      });\n      this.addEventListener(\"dblclick\", function() {\n        this._onDbClick();\n      });\n    }\n\n    const entityId = this.config.entity;\n    const entityClass =\n      this.config.class || this.config.entity.replace(\".\", \"_\");\n    this.setAttribute(\"class\", entityClass);\n    const state = hass.states[entityId];\n    const imageOn =\n      this.config.image_on || \"/static/ais_dom/design_tool/light_on.png\";\n    const imageOff =\n      this.config.image_off || \"/static/ais_dom/design_tool/light_off.png\";\n    //  if the light is on\n    if (state) {\n      if (state.state === \"on\") {\n        var rgbval = state.attributes.rgb_color;\n        var hsval = state.attributes.hs_color;\n        var hsar = \"\";\n        if (hsval) {\n          if (rgbval !== \"255,255,255\") {\n            hsar = \" hue-rotate(\" + hsval[0] + \"deg)\";\n          }\n        }\n        var bbritef = state.attributes.brightness;\n        var bbrite = bbritef / 205;\n\n        this.content.innerHTML = `<img src=\"${imageOn}\" style=\"position: absolute; filter: opacity(${bbrite}) ${hsar}!important;\">`;\n        // this.content.innerHTML = `<img src=\"${imageOn}\"  class=\"${entityClass}\" style=\"position: absolute;\">`;\n      } else {\n        this.content.innerHTML = `<img src=\"${imageOff}\" class=\"${entityClass}\"  style=\"position: absolute;\">`;\n      }\n    } else {\n      this.content.innerHTML = `<img src=\"${imageOff}\" class=\"${entityClass}\" style=\"position: absolute;\">`;\n    }\n  }\n\n  _onClick(hass) {\n    const onTap = this.config.tap_action || \"toggle\";\n    hass.callService(\"light\", onTap, {\n      entity_id: this.config.entity,\n    });\n  }\n\n  _onDbClick() {\n    fireEvent(this, \"hass-more-info\", {\n      entityId: this.config.entity,\n    });\n  }\n\n  ready() {\n    super.ready();\n  }\n\n  setConfig(config) {\n    if (!config.entity) {\n      throw new Error(\"You need to define an entity\");\n    }\n    this.config = config;\n  }\n\n  getCardSize() {\n    return 3;\n  }\n}\n\ncustomElements.define(\"hui-ais-light-card\", ColorLite);\n"],"sourceRoot":""}