{"version":3,"sources":["webpack:///./src/components/ha-icon.ts","webpack:///./src/components/ha-card.ts","webpack:///./src/panels/config/ha-config-section.ts","webpack:///./src/components/ha-fab.ts","webpack:///./src/panels/aisgalery/show-ha-aisgalery-dialog.ts","webpack:///./src/panels/aisgalery/ha-panel-aisgalery.js"],"names":["ironIconClass","customElements","get","loaded","HaIcon","[object Object]","args","super","this","listen","node","eventName","methodName","_iconsetName","__webpack_require__","e","then","bind","define","customElement","_LitElement","_initialize","property","css","html","header","LitElement","_decorate","F","d","kind","decorators","key","value","classMap","narrow","isWide","vertical","horizontal","static","MwcFab","_MwcFab","classes","mdc-fab--mini","mini","mdc-fab--exited","exited","mdc-fab--extended","extended","showLabel","label","ripple","disabled","icon","showIconAtEnd","loadAisgalerydDialog","Promise","all","showAisgaleryDialog","element","fireEvent","dialogTag","dialogImport","dialogParams","PolymerElement","template","properties","hass","Object","Boolean","showMenu","type","aisLocalIP","String","computed","remoteDomain","panel","images","currentImage","currentImgIdx","Number","autoPlayVideo","showImages","img","getImage","callService","path","window","open","focus","_computeAisLocalIP","states","state","_computeRemoteDomain","aisSecureAndroidId","addImage","idx","undefined","isVideo","fileExt","includes","imageMenuClick","setcurrentImgIdx","model","item","index","previousImage","length","nextImage","ready","i","getImages","getcurrentImgIdx","error","paths","attributes","fileList","console","log","lImages","arPath","split","imageName","arFileName","ext","toLowerCase","image","name","substring","extension","date","push","getImageMenuClass","videoLoaded","getVideoDuration","minutes","parseInt","target","duration","seconds","parentNode","querySelector","innerHTML","startVideo","play"],"mappings":"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","file":"chunk.c87a97ef0bd26cbfbc15.js","sourcesContent":["import \"@polymer/iron-icon/iron-icon\";\nimport type { IronIconElement } from \"@polymer/iron-icon/iron-icon\";\nimport { Constructor } from \"../types\";\n\nconst ironIconClass = customElements.get(\"iron-icon\") as Constructor<\n  IronIconElement\n>;\n\nlet loaded = false;\n\nexport class HaIcon extends ironIconClass {\n  private _iconsetName?: string;\n\n  public listen(\n    node: EventTarget | null,\n    eventName: string,\n    methodName: string\n  ): void {\n    super.listen(node, eventName, methodName);\n\n    if (!loaded && this._iconsetName === \"mdi\") {\n      loaded = true;\n      import(/* webpackChunkName: \"mdi-icons\" */ \"../resources/mdi-icons\");\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon\": HaIcon;\n  }\n}\n\ncustomElements.define(\"ha-icon\", HaIcon);\n","import {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\n\n@customElement(\"ha-card\")\nclass HaCard extends LitElement {\n  @property() public header?: string;\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        background: var(\n          --ha-card-background,\n          var(--paper-card-background-color, white)\n        );\n        border-radius: var(--ha-card-border-radius, 2px);\n        box-shadow: var(\n          --ha-card-box-shadow,\n          0 2px 2px 0 rgba(0, 0, 0, 0.14),\n          0 1px 5px 0 rgba(0, 0, 0, 0.12),\n          0 3px 1px -2px rgba(0, 0, 0, 0.2)\n        );\n        color: var(--primary-text-color);\n        display: block;\n        transition: all 0.3s ease-out;\n        position: relative;\n      }\n\n      .card-header,\n      :host ::slotted(.card-header) {\n        color: var(--ha-card-header-color, --primary-text-color);\n        font-family: var(--ha-card-header-font-family, inherit);\n        font-size: var(--ha-card-header-font-size, 24px);\n        letter-spacing: -0.012em;\n        line-height: 32px;\n        padding: 24px 16px 16px;\n        display: block;\n      }\n\n      :host ::slotted(.card-content:not(:first-child)),\n      slot:not(:first-child)::slotted(.card-content) {\n        padding-top: 0px;\n        margin-top: -8px;\n      }\n\n      :host ::slotted(.card-content) {\n        padding: 16px;\n      }\n\n      :host ::slotted(.card-actions) {\n        border-top: 1px solid #e8e8e8;\n        padding: 5px 16px;\n      }\n    `;\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      ${this.header\n        ? html` <div class=\"card-header\">${this.header}</div> `\n        : html``}\n      <slot></slot>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-card\": HaCard;\n  }\n}\n","import { css, customElement, html, LitElement, property } from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\n@customElement(\"ha-config-section\")\nexport class HaConfigSection extends LitElement {\n  @property() public isWide = false;\n\n  protected render() {\n    return html`\n      <div\n        class=\"content ${classMap({\n          narrow: !this.isWide,\n        })}\"\n      >\n        <div class=\"header\"><slot name=\"header\"></slot></div>\n        <div\n          class=\"together layout ${classMap({\n            narrow: !this.isWide,\n            vertical: !this.isWide,\n            horizontal: this.isWide,\n          })}\"\n        >\n          <div class=\"intro\"><slot name=\"introduction\"></slot></div>\n          <div class=\"panel flex-auto\"><slot></slot></div>\n        </div>\n      </div>\n    `;\n  }\n\n  static get styles() {\n    return css`\n      :host {\n        display: block;\n      }\n      .content {\n        padding: 28px 20px 0;\n        max-width: 1040px;\n        margin: 0 auto;\n      }\n\n      .layout {\n        display: flex;\n      }\n\n      .horizontal {\n        flex-direction: row;\n      }\n\n      .vertical {\n        flex-direction: column;\n      }\n\n      .flex-auto {\n        flex: 1 1 auto;\n      }\n\n      .header {\n        font-family: var(--paper-font-headline_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-headline_-_-webkit-font-smoothing\n        );\n        font-size: var(--paper-font-headline_-_font-size);\n        font-weight: var(--paper-font-headline_-_font-weight);\n        letter-spacing: var(--paper-font-headline_-_letter-spacing);\n        line-height: var(--paper-font-headline_-_line-height);\n        opacity: var(--dark-primary-opacity);\n      }\n\n      .together {\n        margin-top: 32px;\n      }\n\n      .intro {\n        font-family: var(--paper-font-subhead_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-subhead_-_-webkit-font-smoothing\n        );\n        font-weight: var(--paper-font-subhead_-_font-weight);\n        line-height: var(--paper-font-subhead_-_line-height);\n        width: 100%;\n        max-width: 400px;\n        margin-right: 40px;\n        opacity: var(--dark-primary-opacity);\n        font-size: 14px;\n        padding-bottom: 20px;\n      }\n\n      .panel {\n        margin-top: -24px;\n      }\n\n      .panel ::slotted(*) {\n        margin-top: 24px;\n        display: block;\n      }\n\n      .narrow.content {\n        max-width: 640px;\n      }\n      .narrow .together {\n        margin-top: 20px;\n      }\n      .narrow .intro {\n        padding-bottom: 20px;\n        margin-right: 0;\n        max-width: 500px;\n      }\n    `;\n  }\n}\n","import \"@material/mwc-fab\";\nimport type { Fab } from \"@material/mwc-fab\";\nimport { ripple } from \"@material/mwc-ripple/ripple-directive\";\nimport { customElement, html, TemplateResult } from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport type { Constructor } from \"../types\";\nimport \"./ha-icon\";\n\nconst MwcFab = customElements.get(\"mwc-fab\") as Constructor<Fab>;\n\n@customElement(\"ha-fab\")\nexport class HaFab extends MwcFab {\n  // We override the render method because we don't have an icon font and mwc-fab doesn't support our svg-icon sets.\n  // Based on version mwc-fab 0.8\n  protected render(): TemplateResult {\n    const classes = {\n      \"mdc-fab--mini\": this.mini,\n      \"mdc-fab--exited\": this.exited,\n      \"mdc-fab--extended\": this.extended,\n    };\n    const showLabel = this.label !== \"\" && this.extended;\n    return html`\n      <button\n        .ripple=\"${ripple()}\"\n        class=\"mdc-fab ${classMap(classes)}\"\n        ?disabled=\"${this.disabled}\"\n        aria-label=\"${this.label || this.icon}\"\n      >\n        ${showLabel && this.showIconAtEnd ? this.label : \"\"}\n        ${this.icon ? html` <ha-icon .icon=${this.icon}></ha-icon> ` : \"\"}\n        ${showLabel && !this.showIconAtEnd ? this.label : \"\"}\n      </button>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-fab\": HaFab;\n  }\n}\n","import { fireEvent } from \"../../common/dom/fire_event\";\n\nconst loadAisgalerydDialog = () =>\n  import(/* webpackChunkName: \"ha-dialog-aisgalery\" */ \"./ha-dialog-aisgalery\");\n\nexport const showAisgaleryDialog = (element: HTMLElement): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"ha-dialog-aisgalery\",\n    dialogImport: loadAisgalerydDialog,\n    dialogParams: {},\n  });\n};\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport { showAisgaleryDialog } from \"./show-ha-aisgalery-dialog\";\nimport \"../../components/ha-card\";\nimport \"../../resources/ha-style\";\nimport \"../config/ha-config-section\";\nimport \"../../components/ha-fab\";\n/* eslint-plugin-disable lit */\n\nclass HaPanelAisgalery extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"ha-style\">\n        div.content {\n          background-color: var(--primary-background-color);\n          width: 100%;\n          min-height: 100%;\n        }\n        .galery_content {\n          overflow: hidden;\n          width: 100%;\n          min-height: 80%;\n          position: absolute;\n        }\n        figcaption {\n          font-size: small;\n        }\n        img,\n        video {\n          width: 100%;\n          max-width: 600px;\n          object-fit: contain;\n        }\n        .image-viewer .btn {\n          position: absolute;\n          transform: translate(-50%, -50%);\n          -ms-transform: translate(-50%, -50%);\n          background-color: #555;\n          color: white;\n          font-size: 16px;\n          padding: 12px 12px;\n          border: none;\n          cursor: pointer;\n          border-radius: 5px;\n          opacity: 0;\n          transition: opacity 0.35s ease;\n        }\n        .image-viewer:hover .btn {\n          opacity: 1;\n        }\n        .image-viewer .btn-left {\n          left: 0%;\n          margin-left: 65px;\n        }\n        .image-viewer .btn-right {\n          right: 0%;\n          margin-right: 30px;\n        }\n        figure.selected {\n          opacity: 0.5;\n        }\n        figure:hover {\n          cursor: pointer;\n        }\n        .duration {\n          font-style: italic;\n        }\n        @media all and (max-width: 600px) {\n          .image-viewer {\n            width: 100%;\n            max-width: 400px;\n            margin: auto;\n          }\n          .image-viewer .btn {\n            top: 33%;\n          }\n          .image-menu {\n            width: 100%;\n            max-width: 300px;\n            overflow-y: hidden;\n            overflow-x: scroll;\n            display: flex;\n          }\n          .image-menu figure {\n            margin: 0px;\n            padding: 12px;\n          }\n        }\n\n        @media all and (min-width: 600px) {\n          .image-viewer {\n            width: 75%;\n            max-width: 500px;\n            position: relative;\n            margin: auto;\n          }\n          .image-viewer .btn {\n            top: 40%;\n          }\n\n          .image-menu {\n            width: 25%;\n            max-width: 300px;\n            height: calc(100vh - 120px);\n            overflow-y: scroll;\n            position: absolute;\n            top: 0px;\n            right: 0px;\n          }\n        }\n\n        @media all and (max-width: 800px) {\n          img,\n          video {\n            width: 100%;\n            max-width: 300px;\n          }\n          .image-viewer {\n            width: 75%;\n            max-width: 300px;\n          }\n          div.image-menu > img,\n          video {\n            width: 100%;\n            max-width: 150px;\n          }\n        }\n\n        ha-fab {\n          position: fixed;\n          bottom: 16px;\n          right: 16px;\n          z-index: 1;\n        }\n\n        ha-fab[is-wide] {\n          bottom: 24px;\n          right: 24px;\n        }\n      </style>\n      <div class=\"content\">\n        <app-toolbar>\n          <ha-menu-button hass=\"[[hass]]\" narrow=\"[[narrow]]\"></ha-menu-button>\n          <div main-title>[[panel.title]]</div>\n          <paper-icon-button\n            aria-label=\"Instrukcja\"\n            icon=\"mdi:information-outline\"\n            on-click=\"_showHelp\"\n          ></paper-icon-button>\n        </app-toolbar>\n        <div class=\"galery_content\" id=\"content\">\n          <template is=\"dom-if\" if=\"[[showImages]]\">\n            <div class=\"image-viewer\">\n              <figure>\n                <img\n                  src=\"{{currentImage.path}}\"\n                  hidden$=\"[[isVideo(currentImage.extension)]]\"\n                />\n                <video\n                  controls\n                  src=\"{{currentImage.path}}#t=0.1\"\n                  hidden$=\"[[!isVideo(currentImage.extension)]]\"\n                  on-loadedmetadata=\"videoLoaded\"\n                  on-canplay=\"startVideo\"\n                ></video>\n                <figcaption>\n                  <span style=\"display: block; text-align: right;\">\n                    <paper-icon-button\n                      icon=\"mdi:image-edit-outline\"\n                      on-click=\"_editImage\"\n                      title=\"Edycja\"\n                    ></paper-icon-button>\n                    <paper-icon-button\n                      icon=\"hass:delete\"\n                      on-click=\"_deleteImage\"\n                    ></paper-icon-button\n                    ><br /> </span\n                  ><br />\n                  URLs:<br />\n                  <paper-icon-button\n                    icon=\"mdi:monitor-dashboard\"\n                  ></paper-icon-button>\n                  {{currentImage.path}}<br />\n                  <paper-icon-button\n                    icon=\"mdi:home-import-outline\"\n                  ></paper-icon-button>\n                  http://{{aisLocalIP}}{{currentImage.path}}<br />\n                  <paper-icon-button\n                    icon=\"mdi:weather-cloudy-arrow-right\"\n                  ></paper-icon-button>\n                  {{remoteDomain}}{{currentImage.path}}\n                  <span\n                    class=\"duration\"\n                    hidden$=\"[[!isVideo(currentImage.extension)]]\"\n                  ></span>\n                </figcaption>\n              </figure>\n              <button class=\"btn btn-left\" on-click=\"previousImage\">\n                &lt;\n              </button>\n              <button class=\"btn btn-right\" on-click=\"nextImage\">\n                &gt;\n              </button>\n            </div>\n          </template>\n          <div class=\"image-menu\">\n            <template is=\"dom-repeat\" items=\"{{images}}\">\n              <figure\n                id=\"image[[item.index]]\"\n                data-imageIndex=\"{{item.index}}\"\n                on-click=\"imageMenuClick\"\n                class$=\"[[getImageMenuClass(item, currentImgIdx)]]\"\n              >\n                <img\n                  src=\"{{item.path}}\"\n                  hidden$=\"[[isVideo(item.extension)]]\"\n                />\n                <video\n                  src=\"{{item.path}}#t=0.1\"\n                  hidden$=\"[[!isVideo(item.extension)]]\"\n                  on-loadedmetadata=\"videoLoaded\"\n                ></video>\n                <figcaption>\n                  {{item.date}}\n                  <span\n                    class=\"duration\"\n                    hidden$=\"[[!isVideo(item.extension)]]\"\n                  ></span>\n                </figcaption>\n              </figure>\n            </template>\n          </div>\n        </div>\n        <ha-fab\n          slot=\"fab\"\n          is-wide$=\"[[isWide]]\"\n          icon=\"hass:plus\"\n          title=\"[[localize('ui.common.add')]]\"\n          on-click=\"addImage\"\n        >\n        </ha-fab>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: Boolean,\n      showMenu: {\n        type: Boolean,\n        value: false,\n      },\n      aisLocalIP: {\n        type: String,\n        computed: \"_computeAisLocalIP(hass)\",\n      },\n      remoteDomain: {\n        type: String,\n        computed: \"_computeRemoteDomain(hass)\",\n      },\n      panel: Object,\n      images: {\n        type: Object,\n        computed: \"getImages(hass)\",\n      },\n      currentImage: Object,\n      currentImgIdx: {\n        type: Number,\n        computed: \"getcurrentImgIdx(hass)\",\n      },\n      autoPlayVideo: {\n        type: Boolean,\n        value: false,\n      },\n      showImages: Boolean,\n    };\n  }\n\n  async _deleteImage() {\n    const img = this.getImage(this.currentImgIdx);\n    await this.hass.callService(\"ais_files\", \"remove_file\", {\n      path: img.path,\n    });\n  }\n\n  async _editImage() {\n    const img = this.getImage(this.currentImgIdx);\n    var win = window.open(\n      \"/static/ais_dom/design_tool/index.html?img=\" + img.path,\n      \"_blank\"\n    );\n    win.focus();\n  }\n\n  async _showHelp() {\n    var win = window.open(\n      \"https://www.ai-speaker.com/docs/ais_app_integration_gallery/\",\n      \"_blank\"\n    );\n    win.focus();\n  }\n\n  _computeAisLocalIP(hass) {\n    return hass.states[\"sensor.internal_ip_address\"].state;\n  }\n\n  _computeRemoteDomain(hass) {\n    this.aisSecureAndroidId =\n      hass.states[\"sensor.ais_secure_android_id_dom\"].state;\n    return \"https://\" + this.aisSecureAndroidId + \".paczka.pro\";\n  }\n\n  addImage() {\n    showAisgaleryDialog(this);\n  }\n\n  getImage(idx) {\n    if (this.images !== undefined && idx !== undefined) {\n      return this.images[idx];\n    }\n    return 0;\n  }\n\n  isVideo(fileExt) {\n    const suportedVideos = [\"mp4\", \"webm\"];\n    if (fileExt) {\n      return suportedVideos.includes(fileExt);\n    }\n\n    return false;\n  }\n\n  imageMenuClick(e) {\n    this.autoPlayVideo = true;\n    this.setcurrentImgIdx(e.model.item.index);\n  }\n\n  previousImage() {\n    var idx = 0;\n    this.autoPlayVideo = true;\n    if (this.currentImgIdx === 0) {\n      idx = this.images.length - 1;\n    } else {\n      idx = Number(this.currentImgIdx) - 1;\n    }\n\n    this.setcurrentImgIdx(idx);\n  }\n\n  nextImage() {\n    var idx = 0;\n    this.autoPlayVideo = true;\n    if (this.currentImgIdx >= this.images.length - 1) {\n      idx = 0;\n    } else {\n      idx = Number(this.currentImgIdx) + 1;\n    }\n    this.setcurrentImgIdx(idx);\n  }\n\n  ready() {\n    super.ready();\n    this.autoPlayVideo = false;\n    this.setcurrentImgIdx(0);\n  }\n\n  setcurrentImgIdx(i) {\n    this.hass.callService(\"ais_files\", \"pick_file\", { idx: i });\n    this.getImages(this.hass);\n    this.currentImage = this.getImage(i);\n  }\n\n  getcurrentImgIdx(hass) {\n    try {\n      var idx = Number(hass.states[\"sensor.ais_gallery_img\"].state);\n      this.currentImage = this.getImage(idx);\n      return idx;\n    } catch (error) {\n      return 0;\n    }\n  }\n\n  getImages(hass) {\n    var paths = [];\n    try {\n      paths = hass.states[\"sensor.ais_gallery_img\"].attributes.fileList;\n    } catch (error) {\n      console.log(\"getImages error: \" + error);\n    }\n    var lastIndex = 0;\n    var lImages = [];\n    for (let i = paths.length - 1; i >= lastIndex; i--) {\n      var path = paths[i];\n      var arPath = path.split(\"/\");\n      var imageName = arPath[arPath.length - 1];\n      var arFileName = imageName.split(\".\");\n      var ext = arFileName[arFileName.length - 1].toLowerCase();\n      imageName = imageName.substring(0, imageName.length - ext.length - 1);\n\n      var image = {\n        path: path,\n        name: imageName,\n        extension: ext,\n        date: imageName,\n        index: lImages.length,\n      };\n      lImages.push(image);\n    }\n    if (lImages.length > 0) {\n      this.showImages = true;\n    } else {\n      this.showImages = false;\n    }\n    return lImages;\n  }\n\n  getImageMenuClass(image, idx) {\n    if (image.index === idx) return \"selected\";\n    return \"\";\n  }\n\n  videoLoaded(e) {\n    this.getVideoDuration(e);\n  }\n\n  getVideoDuration(e) {\n    var minutes = parseInt(e.target.duration / 60);\n    if (minutes < 10) minutes = \"0\" + minutes;\n\n    var seconds = parseInt(e.target.duration % 60);\n    seconds = \"0\" + seconds;\n    seconds = seconds.substring(seconds.length - 2);\n\n    e.target.parentNode.querySelector(\".duration\").innerHTML =\n      \"[\" + minutes + \":\" + seconds + \"]\";\n  }\n\n  startVideo(e) {\n    if (this.autoPlayVideo) e.target.play();\n  }\n}\n\ncustomElements.define(\"ha-panel-aisgalery\", HaPanelAisgalery);\n"],"sourceRoot":""}