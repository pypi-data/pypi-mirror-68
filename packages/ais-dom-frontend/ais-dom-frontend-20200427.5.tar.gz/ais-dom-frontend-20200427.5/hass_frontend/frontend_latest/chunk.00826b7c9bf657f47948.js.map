{"version":3,"sources":["webpack:///./src/panels/lovelace/cards/hui-ais-list-card.js"],"names":["customElements","define","HTMLElement","constructor","super","this","attachShadow","mode","setConfig","config","entity","Error","root","shadowRoot","lastChild","removeChild","cardConfig","card","document","createElement","content","style","iconColor","icon_color","delIconHide","show_delete_icon","accent","textContent","id","header","title","appendChild","_config","hass","selectedId","states","state","feed","attributes","display","rowLimit","row_limit","Object","keys","length","rows","mediaSource","media_source","undefined","cardContent","entry","mediaSourceInfo","audio_type","selectedClass","Number","thumbnail","getElementById","innerHTML","playTracks","querySelectorAll","delTracks","forEach","track","addEventListener","callService","getAttribute","getCardSize"],"mappings":"yEA2MAA,eAAeC,OAAO,oBA3MtB,cAAuBC,YACrBC,cACEC,QACAC,KAAKC,aAAa,CAAEC,KAAM,SAG5BC,UAAUC,GACR,IAAKA,EAAOC,OACV,MAAM,IAAIC,MAAM,2BAGlB,MAAMC,EAAOP,KAAKQ,WACdD,EAAKE,WAAWF,EAAKG,YAAYH,EAAKE,WAE1C,MAAME,EAAaP,EACbQ,EAAOC,SAASC,cAAc,WAC9BC,EAAUF,SAASC,cAAc,OACjCE,EAAQH,SAASC,cAAc,SAC/BG,EAAYN,EAAWO,YAAc,QACrCC,GAC4B,IAAhCR,EAAWS,iBAA4B,GAAK,gBAExCC,EAAS,qCAEfL,EAAMM,+gBAmBQL,gVAY+BI,qCACrBA,q8BAmChBF,4OAYRJ,EAAQQ,GAAK,YACbX,EAAKY,OAASb,EAAWc,MACzBb,EAAKc,YAAYX,GACjBH,EAAKc,YAAYV,GACjBT,EAAKmB,YAAYd,GACjBZ,KAAK2B,QAAUhB,EAGjBiB,SAASA,GACP,MAAMxB,EAASJ,KAAK2B,QACdpB,EAAOP,KAAKQ,WACZqB,EAAaD,EAAKE,OAAO1B,EAAOC,QAAQ0B,MAC9C,GAAIH,EAAKE,OAAO1B,EAAOC,QAAS,CAC9B,MAAM2B,EAAOJ,EAAKE,OAAO1B,EAAOC,QAAQ4B,WACxCjC,KAAKgB,MAAMkB,QAAU,QACrB,MAAMC,EAAW/B,EAAOgC,UACpBhC,EAAOgC,UACPC,OAAOC,KAAKN,GAAMO,OACtB,IAAIC,EAAO,EACX,MAAMC,EAAcrC,EAAOsC,aAE3B,QAAaC,IAATX,GAAsBK,OAAOC,KAAKN,GAAMO,OAAS,EAAG,CACtD,IAAIK,EAAc,GAClB,IAAK,MAAMC,KAASb,EAClB,GAAIa,KAASb,EAAM,CACjB,GAAIQ,GAAQL,EAAU,MACtB,MAAMW,EAAkBd,EAAKa,GAAOE,YAAcN,EAClD,IAAIO,EAAgB,GAChBC,OAAOpB,KAAgBW,IACzBQ,EAAgB,aAElBJ,4LAIMZ,EAAKa,GAAOK,0EAGhBF,0EAEqDR,yBAA4BC,oKAEGD,yBAA4BC,qLAI7ED,yBAA4BC,wWAGRT,EAAKa,GAAOpB,sVAIjDqB,mKAOlBN,EAINjC,EAAKE,UAAUmB,KAAOA,EACtBrB,EAAK4C,eAAe,aAAaC,UAAYR,OAE7C5C,KAAKgB,MAAMkB,QAAU,YAGvBlC,KAAKgB,MAAMkB,QAAU,OAGvB,MAAMmB,EAAa9C,EAAK+C,iBAAiB,SACnCC,EAAYhD,EAAK+C,iBAAiB,cACxCD,EAAWG,QAASC,IAClBA,EAAMC,iBAAiB,QAAS,KAC9B9B,EAAK+B,YAAY,YAAa,aAAc,CAC1CpC,GAAIkC,EAAMG,aAAa,WACvBlB,aAAce,EAAMG,aAAa,2BAMvCL,EAAUC,QAASC,IACjBA,EAAMC,iBAAiB,QAAS,KAC9B9B,EAAK+B,YAAY,YAAa,eAAgB,CAC5CpC,GAAIkC,EAAMG,aAAa,WACvBlB,aAAce,EAAMG,aAAa,2BAMzCC,cACE,OAAO","file":"chunk.00826b7c9bf657f47948.js","sourcesContent":["class ListCard extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: \"open\" });\n  }\n\n  setConfig(config) {\n    if (!config.entity) {\n      throw new Error(\"Please define an entity\");\n    }\n\n    const root = this.shadowRoot;\n    if (root.lastChild) root.removeChild(root.lastChild);\n\n    const cardConfig = config;\n    const card = document.createElement(\"ha-card\");\n    const content = document.createElement(\"div\");\n    const style = document.createElement(\"style\");\n    const iconColor = cardConfig.icon_color || \"white\";\n    const delIconHide =\n      cardConfig.show_delete_icon === true ? \"\" : \"display:none;\";\n    const flagColor = \"var(--primary-color)\";\n    const accent = \"var(--paper-card-background-color)\";\n    const accentSelected = \"var(--primary-color)\";\n    style.textContent = `\n        .fanart_view {\n          width:100%;\n          overflow:hidden;\n          margin-left: auto;\n          margin-right: auto;\n          margin-bottom: 5px;\n          background-repeat:no-repeat;\n          background-size:auto 100%;\n          position:relative;\n        }\n        .fanart_view ha-icon.play {\n          top: 3px;\n          margin-right: -5%;\n          right:0;\n          z-index: 2;\n          width: 15%;\n          height: 15%;\n          position:absolute;\n          color:${iconColor};\n          cursor: pointer;\n        }\n        .fanart_svg_view {\n          overflow:visible;\n          width:55%;\n          margin-top:1%;\n          margin-left:2.5%;\n          alignment-baseline:text-after-edge;\n        }\n        .fanart_fan_view {\n          width:100%;\n          background:linear-gradient(to right, ${accent} 48%,\n          transparent 70%,${accent} 100%);\n          margin:auto;\n        }\n        .fanart_fan_view_selected {\n          width:100%;\n          background:linear-gradient(to right, ${accentSelected} 48%,\n          transparent 70%,${accentSelected} 100%);\n          margin:auto;\n        }\n        .fanart_flag_view {\n          z-index: 1;\n          height: 100%;\n          width: 100%;\n          position: absolute;\n          margin-top: 1px;\n          margin-right: 1px;\n          right: 0;\n          fill:${flagColor};\n        }\n        .fanart_flag_view svg{\n          float:right;\n          width: 90%;\n          height: 100%;\n          margin:0;\n          filter: drop-shadow( -1px 1px 1px rgba(0,0,0,.5));\n          cursor: pointer;\n        }\n        div.delete {\n          width: 20px;\n          height: 20px;\n          position: fixed;\n          padding-left: 4px;\n          z-index: 99999;\n        }\n        div.delete ha-icon {\n          ${delIconHide};\n          cursor: pointer;\n          width: 12px;\n        }\n        div.delete:hover ha-icon{\n          color: red;\n        }\n        div#container{\n          background: var(--primary-background-color);\n        }\n      `;\n\n    content.id = \"container\";\n    card.header = cardConfig.title;\n    card.appendChild(content);\n    card.appendChild(style);\n    root.appendChild(card);\n    this._config = cardConfig;\n  }\n\n  set hass(hass) {\n    const config = this._config;\n    const root = this.shadowRoot;\n    const selectedId = hass.states[config.entity].state;\n    if (hass.states[config.entity]) {\n      const feed = hass.states[config.entity].attributes;\n      this.style.display = \"block\";\n      const rowLimit = config.row_limit\n        ? config.row_limit\n        : Object.keys(feed).length;\n      let rows = 0;\n      const mediaSource = config.media_source;\n\n      if (feed !== undefined && Object.keys(feed).length > 0) {\n        let cardContent = \"\";\n        for (const entry in feed) {\n          if (entry in feed) {\n            if (rows >= rowLimit) break;\n            const mediaSourceInfo = feed[entry].audio_type || mediaSource;\n            let selectedClass = \"\";\n            if (Number(selectedId) === rows) {\n              selectedClass = \"_selected\";\n            }\n            cardContent +=\n              `\n            <div class=\"fanart_view playItem\"\n              style=\"margin-top: 0px; background-size: 54% auto;background-position:100% 35%; background-image:url(\n                ${feed[entry].thumbnail}\n              )\">\n              <div class=\"fanart_fan_view` +\n              selectedClass +\n              `\">\n                  <ha-icon icon=\"mdi:play\" class=\"play\" data-id=\"${rows}\" data-media-source=\"${mediaSource}\"></ha-icon>\n                  <div class=\"fanart_flag_view\">\n                    <svg class=\"play\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\" data-id=\"${rows}\" data-media-source=\"${mediaSource}\">\n                        <polygon points=\"100 30,90 0,100 0\"></polygon>\n                    </svg>\n                  </div>\n                  <div class=\"delete\" data-id=\"${rows}\" data-media-source=\"${mediaSource}\" style=\"cursor: pointer; \"><ha-icon class=\"delete\" icon=\"mdi:close\"></ha-icon></div>\n                  <svg class=\"fanart_svg_view\" viewBox=\"0 -20 200 100\">\n                    <foreignObject width=\"200\" height=\"80\" requiredFeatures=\"http://www.w3.org/TR/SVG11/feature#Extensibility\">\n                        <span xmlns=\"http://www.w3.org/1999/xhtml\">${feed[entry].title}</span>\n                    </foreignObject>\n                    <foreignObject width=\"200\" height=\"80\" requiredFeatures=\"http://www.w3.org/TR/SVG11/feature#Extensibility\">\n                        <div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"font-size:smaller; bottom: 5px; position: absolute;\">\n                        <span>${mediaSourceInfo}</span>\n                        </div>\n                    </foreignObject>\n                  </svg>\n              </div>\n            </div>\n          `;\n            ++rows;\n          }\n        }\n\n        root.lastChild.hass = hass;\n        root.getElementById(\"container\").innerHTML = cardContent;\n      } else {\n        this.style.display = \"none\";\n      }\n    } else {\n      this.style.display = \"none\";\n    }\n    //\n    const playTracks = root.querySelectorAll(\".play\");\n    const delTracks = root.querySelectorAll(\"div.delete\");\n    playTracks.forEach((track) => {\n      track.addEventListener(\"click\", () => {\n        hass.callService(\"ais_cloud\", \"play_audio\", {\n          id: track.getAttribute(\"data-id\"),\n          media_source: track.getAttribute(\"data-media-source\"),\n        });\n        // track.classList.add(\"clicked\");\n      });\n    });\n\n    delTracks.forEach((track) => {\n      track.addEventListener(\"click\", () => {\n        hass.callService(\"ais_cloud\", \"delete_audio\", {\n          id: track.getAttribute(\"data-id\"),\n          media_source: track.getAttribute(\"data-media-source\"),\n        });\n      });\n    });\n  }\n\n  getCardSize() {\n    return 1;\n  }\n}\n\ncustomElements.define(\"hui-ais-list-card\", ListCard);\n"],"sourceRoot":""}