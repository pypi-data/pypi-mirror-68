{"version":3,"sources":["webpack:///./src/panels/lovelace/cards/hui-ais-light-card.js"],"names":["__webpack_require__","r","__webpack_exports__","_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__","customElements","define","HTMLElement","hass","this","content","card","document","createElement","appendChild","style","addEventListener","_onClick","_onDbClick","entityId","config","entity","entityClass","class","replace","setAttribute","state","states","imageOn","image_on","imageOff","image_off","rgbval","attributes","rgb_color","hsval","hs_color","hsar","bbrite","brightness","innerHTML","onTap","tap_action","callService","entity_id","fireEvent","ready","super","setConfig","Error","getCardSize"],"mappings":"wFAAAA,EAAAC,EAAAC,GAAA,IAAAC,EAAAH,EAAA,IAiFAI,eAAeC,OAAO,qBA/EtB,cAAwBC,YACtBC,SAASA,GACP,IAAKC,KAAKC,QAAS,CACjB,MAAMC,EAAOC,SAASC,cAAc,WACpCJ,KAAKC,QAAUE,SAASC,cAAc,OACtCF,EAAKG,YAAYL,KAAKC,SACtBC,EAAKI,MACH,yEACFN,KAAKK,YAAYH,GACjBF,KAAKO,iBAAiB,QAAS,WAC7BP,KAAKQ,SAAST,KAEhBC,KAAKO,iBAAiB,WAAY,WAChCP,KAAKS,eAIT,MAAMC,EAAWV,KAAKW,OAAOC,OACvBC,EACJb,KAAKW,OAAOG,OAASd,KAAKW,OAAOC,OAAOG,QAAQ,IAAK,KACvDf,KAAKgB,aAAa,QAASH,GAC3B,MAAMI,EAAQlB,EAAKmB,OAAOR,GACpBS,EACJnB,KAAKW,OAAOS,UAAY,2CACpBC,EACJrB,KAAKW,OAAOW,WAAa,4CAE3B,GAAIL,EACF,GAAoB,OAAhBA,EAAMA,MAAgB,CACxB,IAAIM,EAASN,EAAMO,WAAWC,UAC1BC,EAAQT,EAAMO,WAAWG,SACzBC,EAAO,GACPF,GACa,gBAAXH,IACFK,EAAO,eAAiBF,EAAM,GAAK,QAGvC,IACIG,EADUZ,EAAMO,WAAWM,WACR,IAEvB9B,KAAKC,QAAQ8B,uBAAyBZ,iDAAuDU,MAAWD,sBAGxG5B,KAAKC,QAAQ8B,uBAAyBV,aAAoBR,wCAG5Db,KAAKC,QAAQ8B,uBAAyBV,aAAoBR,kCAI9DL,SAAST,GACP,MAAMiC,EAAQhC,KAAKW,OAAOsB,YAAc,SACxClC,EAAKmC,YAAY,QAASF,EAAO,CAC/BG,UAAWnC,KAAKW,OAAOC,SAI3BH,aACE2B,YAAUpC,KAAM,iBAAkB,CAChCU,SAAUV,KAAKW,OAAOC,SAI1ByB,QACEC,MAAMD,QAGRE,UAAU5B,GACR,IAAKA,EAAOC,OACV,MAAM,IAAI4B,MAAM,gCAElBxC,KAAKW,OAASA,EAGhB8B,cACE,OAAO","file":"chunk.920719bea6b610fa331c.js","sourcesContent":["import { fireEvent } from \"../../../common/dom/fire_event\";\n\nclass ColorLite extends HTMLElement {\n  set hass(hass) {\n    if (!this.content) {\n      const card = document.createElement(\"ha-card\");\n      this.content = document.createElement(\"div\");\n      card.appendChild(this.content);\n      card.style =\n        \"background:none; width: 110px; border-radius: 52.5px; cursor: pointer;\";\n      this.appendChild(card);\n      this.addEventListener(\"click\", function() {\n        this._onClick(hass);\n      });\n      this.addEventListener(\"dblclick\", function() {\n        this._onDbClick();\n      });\n    }\n\n    const entityId = this.config.entity;\n    const entityClass =\n      this.config.class || this.config.entity.replace(\".\", \"_\");\n    this.setAttribute(\"class\", entityClass);\n    const state = hass.states[entityId];\n    const imageOn =\n      this.config.image_on || \"/static/ais_dom/design_tool/light_on.png\";\n    const imageOff =\n      this.config.image_off || \"/static/ais_dom/design_tool/light_off.png\";\n    //  if the light is on\n    if (state) {\n      if (state.state === \"on\") {\n        var rgbval = state.attributes.rgb_color;\n        var hsval = state.attributes.hs_color;\n        var hsar = \"\";\n        if (hsval) {\n          if (rgbval !== \"255,255,255\") {\n            hsar = \" hue-rotate(\" + hsval[0] + \"deg)\";\n          }\n        }\n        var bbritef = state.attributes.brightness;\n        var bbrite = bbritef / 205;\n\n        this.content.innerHTML = `<img src=\"${imageOn}\" style=\"position: absolute; filter: opacity(${bbrite}) ${hsar}!important;\">`;\n        // this.content.innerHTML = `<img src=\"${imageOn}\"  class=\"${entityClass}\" style=\"position: absolute;\">`;\n      } else {\n        this.content.innerHTML = `<img src=\"${imageOff}\" class=\"${entityClass}\"  style=\"position: absolute;\">`;\n      }\n    } else {\n      this.content.innerHTML = `<img src=\"${imageOff}\" class=\"${entityClass}\" style=\"position: absolute;\">`;\n    }\n  }\n\n  _onClick(hass) {\n    const onTap = this.config.tap_action || \"toggle\";\n    hass.callService(\"light\", onTap, {\n      entity_id: this.config.entity,\n    });\n  }\n\n  _onDbClick() {\n    fireEvent(this, \"hass-more-info\", {\n      entityId: this.config.entity,\n    });\n  }\n\n  ready() {\n    super.ready();\n  }\n\n  setConfig(config) {\n    if (!config.entity) {\n      throw new Error(\"You need to define an entity\");\n    }\n    this.config = config;\n  }\n\n  getCardSize() {\n    return 3;\n  }\n}\n\ncustomElements.define(\"hui-ais-light-card\", ColorLite);\n"],"sourceRoot":""}