[tox]
envlist = py36,py37,py38
skip_missing_interpreters=true
[testenv]
# Have to allow use of host libs because hawkey isn't in pypi(!)
# This relies on the host having Python 3 hawkey available,
# which should be safe when tests run on Fedora at least.
sitepackages=True
deps=-r{toxinidir}/install.requires
     -r{toxinidir}/tests.requires
     -r{toxinidir}/tox.requires
commands=python3 -m pytest --cov-report term-missing --cov-report xml --cov relvalconsumer
         diff-cover coverage.xml --fail-under=90
         diff-quality --violations=pylint --fail-under=90
         black relvalconsumer.py test_relvalconsumer.py --check
setenv =
    PYTHONPATH = {toxinidir}
