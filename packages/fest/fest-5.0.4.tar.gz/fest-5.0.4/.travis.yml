language: python
python:
- "3.6"
- "3.7"
- "3.8"
before_install:
- pip install pipenv
- curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
- chmod +x ./cc-test-reporter
- ./cc-test-reporter before-build
install:
- pipenv install --dev
script:
- pipenv run flake8
- pipenv run py.test
after_script:
- ./cc-test-reporter after-build --exit-code ${TRAVIS_TEST_RESULT}
deploy:
- provider: pypi
  user: amancevice
  password:
    secure: >-
      sPuaNjGAL/ZS8zu/2AS56Nq/oKgTUlVeyDnc8YeZE1iSjPntkNaN8bRH8YyvQS7+wnRBfSgRr
      6fDYxhitj1/r6FeZkw9F5xzz5xBOIKYqSDDKk9LKToAhIYrw3FY0x5lfqFmw1c7eTXkbw6ol6
      SQPAhTtvo3zmMPVLsgPi6hl5Cr/7vDGItSgu3iC0GOtSGbyC3s1PDxN95RYv8Y7Et87OGCZeT
      vYf4O74D9ON7pepwBYQKNXtnimpZu9TppOjQiHXTSiSDNCj+6gry0UQQDfkv021Jtr4lBa8Q1
      4W6sMpmv7JlwqVMr3EDay/qtW856NMmtSX0AQi3HAnS7wHUdNUo1jO+NpuUpRU/bt0dl65rM/
      Vve5pqlcELfMbdWzurcacBV5Iw25BiX0l0mcv3STH5Ve7k56wuvXr+vGNPjaOk6kk2uiUuk+I
      7ve39ISIfbUdbJP2lHNVbsmfkino8eD7WiOiA5+q01nOmMXtr2C373dtQWs4eWNQN++43e8lf
      tpUemA/nHZFvQQVjuuxUwaVv/Snxy4pq97u1JKAK1en8/WG40XQprSGA8jE7dTw9wkfOyApCS
      U1AAp5AOHYa0Aaa4Ns0yF0F5hmymuPAhYuYtDA6NYJQ51TaPWcdSVS5dAV8C8FzLUDx2PGefN
      3s9SjKrgpxtikcT8qHmbFV+Y+c=
  on:
    repo: amancevice/fest
    tags: true
