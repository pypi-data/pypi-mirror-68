{"version":3,"sources":["webpack:///./src/components/ha-card.ts","webpack:///../src/directives/if-defined.ts","webpack:///./src/dialogs/generic/show-dialog-box.ts","webpack:///./src/common/string/compare.ts","webpack:///./src/panels/config/ha-config-section.ts","webpack:///src/mwc-fab-base.ts","webpack:///src/mwc-fab-css.ts","webpack:///src/mwc-fab.ts","webpack:///./src/data/user.ts","webpack:///./src/panels/config/person/show-dialog-person-detail.ts","webpack:///./src/panels/config/person/ha-config-person.ts","webpack:///./src/data/person.ts"],"names":["customElement","_LitElement","[object Object]","args","super","_initialize","this","property","css","html","header","LitElement","__webpack_require__","d","__webpack_exports__","ifDefined","_lit_html_js__WEBPACK_IMPORTED_MODULE_0__","previousValues","WeakMap","Object","value","part","previousValue","get","undefined","has","name","committer","element","removeAttribute","setValue","set","showAlertDialog","showConfirmationDialog","showPromptDialog","_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__","loadGenericDialog","Promise","all","e","then","bind","showDialogHelper","dialogParams","extra","resolve","origCancel","cancel","origConfirm","confirm","fireEvent","dialogTag","dialogImport","assign","prompt","out","confirmation","compare","caseInsensitiveCompare","a","b","toLowerCase","_decorate","F","kind","decorators","key","classMap","narrow","isWide","vertical","horizontal","static","mwc_fab_base_FabBase","lit_element","mini","exited","disabled","extended","showIconAtEnd","icon","label","attachShadow","mode","delegatesFocus","classes","mdc-fab--mini","mdc-fab--exited","mdc-fab--extended","icon-end","showLabel","iconTemplate","class_map","ripple_directive","tslib_es6","type","Boolean","style","mwc_fab_Fab","styles","SYSTEM_GROUP_ID_ADMIN","SYSTEM_GROUP_ID_USER","fetchUsers","createUser","updateUser","deleteUser","async","hass","callWS","group_ids","userId","params","user_id","loadPersonDetailDialog","HaConfigPerson","_storageItems","_configItems","route","configSections","persons","localize","length","map","entry","_openEditEntry","_createPerson","mdiPlus","changedProps","_get","_getPrototypeOf","prototype","call","_fetchData","_usersLoad","personData","fetchPersons","storage","sort","ent1","ent2","config","_openDialog","ev","currentTarget","users","currentPerson","used","Set","coll","pers","add","currentUserId","filter","user","id","systemLogDetailParams","_allowedUsers","createEntry","created","values","createPerson","concat","updateEntry","updated","personId","updates","person_id","updatePerson","ent","removeEntry","title","text","dismissText","confirmText","deletePerson","err","customElements","define"],"mappings":"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","file":"chunk.1d4fbd73bbd165f8be61.js","sourcesContent":["import {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\n\n@customElement(\"ha-card\")\nclass HaCard extends LitElement {\n  @property() public header?: string;\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        background: var(\n          --ha-card-background,\n          var(--paper-card-background-color, white)\n        );\n        border-radius: var(--ha-card-border-radius, 2px);\n        box-shadow: var(\n          --ha-card-box-shadow,\n          0 2px 2px 0 rgba(0, 0, 0, 0.14),\n          0 1px 5px 0 rgba(0, 0, 0, 0.12),\n          0 3px 1px -2px rgba(0, 0, 0, 0.2)\n        );\n        color: var(--primary-text-color);\n        display: block;\n        transition: all 0.3s ease-out;\n        position: relative;\n      }\n\n      .card-header,\n      :host ::slotted(.card-header) {\n        color: var(--ha-card-header-color, --primary-text-color);\n        font-family: var(--ha-card-header-font-family, inherit);\n        font-size: var(--ha-card-header-font-size, 24px);\n        letter-spacing: -0.012em;\n        line-height: 32px;\n        padding: 24px 16px 16px;\n        display: block;\n      }\n\n      :host ::slotted(.card-content:not(:first-child)),\n      slot:not(:first-child)::slotted(.card-content) {\n        padding-top: 0px;\n        margin-top: -8px;\n      }\n\n      :host ::slotted(.card-content) {\n        padding: 16px;\n      }\n\n      :host ::slotted(.card-actions) {\n        border-top: 1px solid #e8e8e8;\n        padding: 5px 16px;\n      }\n    `;\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      ${this.header\n        ? html` <div class=\"card-header\">${this.header}</div> `\n        : html``}\n      <slot></slot>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-card\": HaCard;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {AttributePart, directive, Part} from '../lit-html.js';\n\nconst previousValues = new WeakMap<Part, unknown>();\n\n/**\n * For AttributeParts, sets the attribute if the value is defined and removes\n * the attribute if the value is undefined.\n *\n * For other part types, this directive is a no-op.\n */\nexport const ifDefined = directive((value: unknown) => (part: Part) => {\n  const previousValue = previousValues.get(part);\n\n  if (value === undefined && part instanceof AttributePart) {\n    // If the value is undefined, remove the attribute, but only if the value\n    // was previously defined.\n    if (previousValue !== undefined || !previousValues.has(part)) {\n      const name = part.committer.name;\n      part.committer.element.removeAttribute(name);\n    }\n  } else if (value !== previousValue) {\n    part.setValue(value);\n  }\n\n  previousValues.set(part, value);\n});\n","import { TemplateResult } from \"lit-html\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\n\ninterface BaseDialogParams {\n  confirmText?: string;\n  text?: string | TemplateResult;\n  title?: string;\n}\n\nexport interface AlertDialogParams extends BaseDialogParams {\n  confirm?: () => void;\n}\n\nexport interface ConfirmationDialogParams extends BaseDialogParams {\n  dismissText?: string;\n  confirm?: () => void;\n  cancel?: () => void;\n}\n\nexport interface PromptDialogParams extends BaseDialogParams {\n  inputLabel?: string;\n  inputType?: string;\n  defaultValue?: string;\n  confirm?: (out?: string) => void;\n}\n\nexport interface DialogParams\n  extends ConfirmationDialogParams,\n    PromptDialogParams {\n  confirm?: (out?: string) => void;\n  confirmation?: boolean;\n  prompt?: boolean;\n}\n\nexport const loadGenericDialog = () =>\n  import(/* webpackChunkName: \"confirmation\" */ \"./dialog-box\");\n\nconst showDialogHelper = (\n  element: HTMLElement,\n  dialogParams: DialogParams,\n  extra?: {\n    confirmation?: DialogParams[\"confirmation\"];\n    prompt?: DialogParams[\"prompt\"];\n  }\n) =>\n  new Promise((resolve) => {\n    const origCancel = dialogParams.cancel;\n    const origConfirm = dialogParams.confirm;\n\n    fireEvent(element, \"show-dialog\", {\n      dialogTag: \"dialog-box\",\n      dialogImport: loadGenericDialog,\n      dialogParams: {\n        ...dialogParams,\n        ...extra,\n        cancel: () => {\n          resolve(extra?.prompt ? null : false);\n          if (origCancel) {\n            origCancel();\n          }\n        },\n        confirm: (out) => {\n          resolve(extra?.prompt ? out : true);\n          if (origConfirm) {\n            origConfirm(out);\n          }\n        },\n      },\n    });\n  });\n\nexport const showAlertDialog = (\n  element: HTMLElement,\n  dialogParams: AlertDialogParams\n) => showDialogHelper(element, dialogParams);\n\nexport const showConfirmationDialog = (\n  element: HTMLElement,\n  dialogParams: ConfirmationDialogParams\n) =>\n  showDialogHelper(element, dialogParams, { confirmation: true }) as Promise<\n    boolean\n  >;\n\nexport const showPromptDialog = (\n  element: HTMLElement,\n  dialogParams: PromptDialogParams\n) =>\n  showDialogHelper(element, dialogParams, { prompt: true }) as Promise<\n    null | string\n  >;\n","export const compare = (a: string, b: string) => {\n  if (a < b) {\n    return -1;\n  }\n  if (a > b) {\n    return 1;\n  }\n\n  return 0;\n};\n\nexport const caseInsensitiveCompare = (a: string, b: string) =>\n  compare(a.toLowerCase(), b.toLowerCase());\n","import { css, customElement, html, LitElement, property } from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\n@customElement(\"ha-config-section\")\nexport class HaConfigSection extends LitElement {\n  @property() public isWide = false;\n\n  protected render() {\n    return html`\n      <div\n        class=\"content ${classMap({\n          narrow: !this.isWide,\n        })}\"\n      >\n        <div class=\"header\"><slot name=\"header\"></slot></div>\n        <div\n          class=\"together layout ${classMap({\n            narrow: !this.isWide,\n            vertical: !this.isWide,\n            horizontal: this.isWide,\n          })}\"\n        >\n          <div class=\"intro\"><slot name=\"introduction\"></slot></div>\n          <div class=\"panel flex-auto\"><slot></slot></div>\n        </div>\n      </div>\n    `;\n  }\n\n  static get styles() {\n    return css`\n      :host {\n        display: block;\n      }\n      .content {\n        padding: 28px 20px 0;\n        max-width: 1040px;\n        margin: 0 auto;\n      }\n\n      .layout {\n        display: flex;\n      }\n\n      .horizontal {\n        flex-direction: row;\n      }\n\n      .vertical {\n        flex-direction: column;\n      }\n\n      .flex-auto {\n        flex: 1 1 auto;\n      }\n\n      .header {\n        font-family: var(--paper-font-headline_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-headline_-_-webkit-font-smoothing\n        );\n        font-size: var(--paper-font-headline_-_font-size);\n        font-weight: var(--paper-font-headline_-_font-weight);\n        letter-spacing: var(--paper-font-headline_-_letter-spacing);\n        line-height: var(--paper-font-headline_-_line-height);\n        opacity: var(--dark-primary-opacity);\n      }\n\n      .together {\n        margin-top: 32px;\n      }\n\n      .intro {\n        font-family: var(--paper-font-subhead_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-subhead_-_-webkit-font-smoothing\n        );\n        font-weight: var(--paper-font-subhead_-_font-weight);\n        line-height: var(--paper-font-subhead_-_line-height);\n        width: 100%;\n        max-width: 400px;\n        margin-right: 40px;\n        opacity: var(--dark-primary-opacity);\n        font-size: 14px;\n        padding-bottom: 20px;\n      }\n\n      .panel {\n        margin-top: -24px;\n      }\n\n      .panel ::slotted(*) {\n        margin-top: 24px;\n        display: block;\n      }\n\n      .narrow.content {\n        max-width: 640px;\n      }\n      .narrow .together {\n        margin-top: 20px;\n      }\n      .narrow .intro {\n        padding-bottom: 20px;\n        margin-right: 0;\n        max-width: 500px;\n      }\n    `;\n  }\n}\n","/**\n@license\nCopyright 2018 Google Inc. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport {ripple} from '@material/mwc-ripple/ripple-directive.js';\nimport {html, LitElement, property, TemplateResult} from 'lit-element';\nimport {classMap} from 'lit-html/directives/class-map.js';\n\nexport class FabBase extends LitElement {\n  @property({type: Boolean}) mini = false;\n\n  @property({type: Boolean}) exited = false;\n\n  @property({type: Boolean}) disabled = false;\n\n  @property({type: Boolean}) extended = false;\n\n  @property({type: Boolean}) showIconAtEnd = false;\n\n  @property() icon = '';\n\n  @property() label = '';\n\n  protected createRenderRoot() {\n    return this.attachShadow({mode: 'open', delegatesFocus: true});\n  }\n\n  protected render() {\n    const classes = {\n      'mdc-fab--mini': this.mini,\n      'mdc-fab--exited': this.exited,\n      'mdc-fab--extended': this.extended,\n      'icon-end': this.showIconAtEnd,\n    };\n    const showLabel = this.label !== '' && this.extended;\n\n    let iconTemplate: TemplateResult|string = '';\n\n    if (this.icon) {\n      iconTemplate = html`\n        <span class=\"material-icons mdc-fab__icon\">${this.icon}</span>`;\n    }\n\n    let label = html``;\n\n    if (showLabel) {\n      label = html`<span class=\"mdc-fab__label\">${this.label}</span>`;\n    }\n\n    return html`\n      <button\n          class=\"mdc-fab ${classMap(classes)}\"\n          ?disabled=\"${this.disabled}\"\n          aria-label=\"${this.label || this.icon}\"\n          .ripple=\"${ripple()}\">\n        <div class=\"mdc-fab__ripple\"></div>\n        ${this.showIconAtEnd ? label : ''}\n        <slot name=\"icon\">\n          ${iconTemplate}\n        </slot>\n        ${!this.showIconAtEnd ? label : ''}\n      </button>`;\n  }\n}\n","/**\n@license\nCopyright 2018 Google Inc. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport {css} from 'lit-element';\n\nexport const style = css`.material-icons{font-family:var(--mdc-icon-font, \"Material Icons\");font-weight:normal;font-style:normal;font-size:var(--mdc-icon-size, 24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:\"liga\"}.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;opacity:0;pointer-events:none;transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:#fff}.mdc-fab{position:relative;box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0,0,0,.12);display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1);background-color:#018786;background-color:var(--mdc-theme-secondary, #018786);color:#fff;color:var(--mdc-theme-on-secondary, #fff)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab:hover,.mdc-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0,0,0,.12)}.mdc-fab:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 12px 17px 2px rgba(0, 0, 0, 0.14),0px 5px 22px 4px rgba(0,0,0,.12)}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-button-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:.875rem;font-size:var(--mdc-typography-button-font-size, 0.875rem);line-height:2.25rem;line-height:var(--mdc-typography-button-line-height, 2.25rem);font-weight:500;font-weight:var(--mdc-typography-button-font-weight, 500);letter-spacing:.0892857143em;letter-spacing:var(--mdc-typography-button-letter-spacing, 0.0892857143em);text-decoration:none;text-decoration:var(--mdc-typography-button-text-decoration, none);text-transform:uppercase;text-transform:var(--mdc-typography-button-text-transform, uppercase);border-radius:24px;padding:0 20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:-8px;margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:-8px}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:-8px}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:-8px;margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;right:0;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid transparent;border-radius:inherit;content:\"\"}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}@keyframes mdc-ripple-fg-radius-in{from{animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:translate(var(--mdc-ripple-fg-translate-start, 0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}}@keyframes mdc-ripple-fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity, 0)}}@keyframes mdc-ripple-fg-opacity-out{from{animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity, 0)}to{opacity:0}}.mdc-fab{--mdc-ripple-fg-size: 0;--mdc-ripple-left: 0;--mdc-ripple-top: 0;--mdc-ripple-fg-scale: 1;--mdc-ripple-fg-translate-end: 0;--mdc-ripple-fg-translate-start: 0;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-fab .mdc-fab__ripple::before,.mdc-fab .mdc-fab__ripple::after{position:absolute;border-radius:50%;opacity:0;pointer-events:none;content:\"\"}.mdc-fab .mdc-fab__ripple::before{transition:opacity 15ms linear,background-color 15ms linear;z-index:1}.mdc-fab.mdc-ripple-upgraded .mdc-fab__ripple::before{transform:scale(var(--mdc-ripple-fg-scale, 1))}.mdc-fab.mdc-ripple-upgraded .mdc-fab__ripple::after{top:0;left:0;transform:scale(0);transform-origin:center center}.mdc-fab.mdc-ripple-upgraded--unbounded .mdc-fab__ripple::after{top:var(--mdc-ripple-top, 0);left:var(--mdc-ripple-left, 0)}.mdc-fab.mdc-ripple-upgraded--foreground-activation .mdc-fab__ripple::after{animation:mdc-ripple-fg-radius-in 225ms forwards,mdc-ripple-fg-opacity-in 75ms forwards}.mdc-fab.mdc-ripple-upgraded--foreground-deactivation .mdc-fab__ripple::after{animation:mdc-ripple-fg-opacity-out 150ms;transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}.mdc-fab .mdc-fab__ripple::before,.mdc-fab .mdc-fab__ripple::after{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%}.mdc-fab.mdc-ripple-upgraded .mdc-fab__ripple::after{width:var(--mdc-ripple-fg-size, 100%);height:var(--mdc-ripple-fg-size, 100%)}.mdc-fab .mdc-fab__ripple::before,.mdc-fab .mdc-fab__ripple::after{background-color:#fff;background-color:var(--mdc-theme-on-secondary, #fff)}.mdc-fab:hover .mdc-fab__ripple::before{opacity:.08}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__ripple::before,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__ripple::before{transition-duration:75ms;opacity:.24}.mdc-fab:not(.mdc-ripple-upgraded) .mdc-fab__ripple::after{transition:opacity 150ms linear}.mdc-fab:not(.mdc-ripple-upgraded):active .mdc-fab__ripple::after{transition-duration:75ms;opacity:.24}.mdc-fab.mdc-ripple-upgraded{--mdc-ripple-fg-opacity: 0.24}.mdc-fab .mdc-fab__ripple{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden}:host{outline:none}.mdc-fab{box-shadow:var(--mdc-fab-box-shadow, 0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12))}.mdc-fab:hover,.mdc-fab:focus{box-shadow:var(--mdc-fab-box-shadow-hover, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mdc-fab:active{box-shadow:var(--mdc-fab-box-shadow-active, 0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12))}.mdc-fab ::slotted([slot=icon]){transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform;display:inline-flex;align-items:center;justify-content:center}.mdc-fab ::slotted([slot=icon]) .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab.mdc-fab--extended ::slotted([slot=icon]){margin-left:-8px;margin-right:12px}[dir=rtl] .mdc-fab.mdc-fab--extended ::slotted([slot=icon]),.mdc-fab.mdc-fab--extended ::slotted([slot=icon])[dir=rtl]{margin-left:12px;margin-right:-8px}.mdc-fab.mdc-fab--extended.icon-end .mdc-fab__icon,.mdc-fab.mdc-fab--extended.icon-end ::slotted([slot=icon]){margin-left:12px;margin-right:-8px}[dir=rtl] .mdc-fab.mdc-fab--extended.icon-end .mdc-fab__icon,.mdc-fab.mdc-fab--extended.icon-end .mdc-fab__icon[dir=rtl],[dir=rtl] .mdc-fab.mdc-fab--extended.icon-end ::slotted([slot=icon]),.mdc-fab.mdc-fab--extended.icon-end ::slotted([slot=icon])[dir=rtl]{margin-left:-8px;margin-right:12px}.mdc-fab.mdc-fab--exited ::slotted([slot=icon]){transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}`;\n","/**\n@license\nCopyright 2018 Google Inc. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport {customElement} from 'lit-element';\n\nimport {FabBase} from './mwc-fab-base.js';\nimport {style} from './mwc-fab-css.js';\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'mwc-fab': Fab;\n  }\n}\n\n@customElement('mwc-fab')\nexport class Fab extends FabBase {\n  static styles = style;\n}\n","import { HomeAssistant } from \"../types\";\nimport { Credential } from \"./auth\";\n\nexport const SYSTEM_GROUP_ID_ADMIN = \"system-admin\";\nexport const SYSTEM_GROUP_ID_USER = \"system-users\";\nexport const SYSTEM_GROUP_ID_READ_ONLY = \"system-read-only\";\n\nexport const GROUPS = [SYSTEM_GROUP_ID_USER, SYSTEM_GROUP_ID_ADMIN];\n\nexport interface User {\n  id: string;\n  name: string;\n  is_owner: boolean;\n  is_active: boolean;\n  system_generated: boolean;\n  group_ids: string[];\n  credentials: Credential[];\n}\n\nexport interface UpdateUserParams {\n  name?: User[\"name\"];\n  group_ids?: User[\"group_ids\"];\n}\n\nexport const fetchUsers = async (hass: HomeAssistant) =>\n  hass.callWS<User[]>({\n    type: \"config/auth/list\",\n  });\n\nexport const createUser = async (\n  hass: HomeAssistant,\n  name: string,\n  // eslint-disable-next-line: variable-name\n  group_ids?: User[\"group_ids\"]\n) =>\n  hass.callWS<{ user: User }>({\n    type: \"config/auth/create\",\n    name,\n    group_ids,\n  });\n\nexport const updateUser = async (\n  hass: HomeAssistant,\n  userId: string,\n  params: UpdateUserParams\n) =>\n  hass.callWS<{ user: User }>({\n    ...params,\n    type: \"config/auth/update\",\n    user_id: userId,\n  });\n\nexport const deleteUser = async (hass: HomeAssistant, userId: string) =>\n  hass.callWS<void>({\n    type: \"config/auth/delete\",\n    user_id: userId,\n  });\n","import { fireEvent } from \"../../../common/dom/fire_event\";\nimport { Person, PersonMutableParams } from \"../../../data/person\";\nimport { User } from \"../../../data/user\";\n\nexport interface PersonDetailDialogParams {\n  entry?: Person;\n  users: User[];\n  createEntry: (values: PersonMutableParams) => Promise<unknown>;\n  updateEntry: (updates: Partial<PersonMutableParams>) => Promise<unknown>;\n  removeEntry: () => Promise<boolean>;\n}\n\nexport const loadPersonDetailDialog = () =>\n  import(\n    /* webpackChunkName: \"person-detail-dialog\" */ \"./dialog-person-detail\"\n  );\n\nexport const showPersonDetailDialog = (\n  element: HTMLElement,\n  systemLogDetailParams: PersonDetailDialogParams\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-person-detail\",\n    dialogImport: loadPersonDetailDialog,\n    dialogParams: systemLogDetailParams,\n  });\n};\n","import \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport {\n  css,\n  CSSResult,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\nimport { compare } from \"../../../common/string/compare\";\nimport \"../../../components/ha-card\";\nimport \"@material/mwc-fab\";\nimport {\n  createPerson,\n  deletePerson,\n  fetchPersons,\n  Person,\n  updatePerson,\n} from \"../../../data/person\";\nimport { fetchUsers, User } from \"../../../data/user\";\nimport { showConfirmationDialog } from \"../../../dialogs/generic/show-dialog-box\";\nimport \"../../../layouts/hass-loading-screen\";\nimport \"../../../layouts/hass-tabs-subpage\";\nimport { HomeAssistant, Route } from \"../../../types\";\nimport \"../ha-config-section\";\nimport { configSections } from \"../ha-panel-config\";\nimport {\n  loadPersonDetailDialog,\n  showPersonDetailDialog,\n} from \"./show-dialog-person-detail\";\nimport \"../../../components/ha-svg-icon\";\nimport { mdiPlus } from \"@mdi/js\";\n\nclass HaConfigPerson extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public isWide?: boolean;\n\n  @property() public narrow?: boolean;\n\n  @property() public route!: Route;\n\n  @property() private _storageItems?: Person[];\n\n  @property() private _configItems?: Person[];\n\n  private _usersLoad?: Promise<User[]>;\n\n  protected render(): TemplateResult {\n    if (\n      !this.hass ||\n      this._storageItems === undefined ||\n      this._configItems === undefined\n    ) {\n      return html` <hass-loading-screen></hass-loading-screen> `;\n    }\n    const hass = this.hass;\n    return html`\n      <hass-tabs-subpage\n        .hass=${this.hass}\n        .narrow=${this.narrow}\n        .route=${this.route}\n        back-path=\"/config\"\n        .tabs=${configSections.persons}\n      >\n        <ha-config-section .isWide=${this.isWide}>\n          <span slot=\"header\"\n            >${hass.localize(\"ui.panel.config.person.caption\")}</span\n          >\n          <span slot=\"introduction\">\n            ${hass.localize(\"ui.panel.config.person.introduction\")}\n            ${this._configItems.length > 0\n              ? html`\n                  <p>\n                    ${hass.localize(\n                      \"ui.panel.config.person.note_about_persons_configured_in_yaml\"\n                    )}\n                  </p>\n                `\n              : \"\"}\n          </span>\n          <ha-card class=\"storage\">\n            ${this._storageItems.map((entry) => {\n              return html`\n                <paper-item @click=${this._openEditEntry} .entry=${entry}>\n                  <paper-item-body>\n                    ${entry.name}\n                  </paper-item-body>\n                </paper-item>\n              `;\n            })}\n            ${this._storageItems.length === 0\n              ? html`\n                  <div class=\"empty\">\n                    ${hass.localize(\n                      \"ui.panel.config.person.no_persons_created_yet\"\n                    )}\n                    <mwc-button @click=${this._createPerson}>\n                      ${hass.localize(\n                        \"ui.panel.config.person.create_person\"\n                      )}</mwc-button\n                    >\n                  </div>\n                `\n              : html``}\n          </ha-card>\n          ${this._configItems.length > 0\n            ? html`\n                <ha-card header=\"Configuration.yaml persons\">\n                  ${this._configItems.map((entry) => {\n                    return html`\n                      <paper-item>\n                        <paper-item-body>\n                          ${entry.name}\n                        </paper-item-body>\n                      </paper-item>\n                    `;\n                  })}\n                </ha-card>\n              `\n            : \"\"}\n        </ha-config-section>\n      </hass-tabs-subpage>\n\n      <mwc-fab\n        ?is-wide=${this.isWide}\n        ?narrow=${this.narrow}\n        title=\"${hass.localize(\"ui.panel.config.person.add_person\")}\"\n        @click=${this._createPerson}\n      >\n        <ha-svg-icon slot=\"icon\" path=${mdiPlus}></ha-svg-icon>\n      </mwc-fab>\n    `;\n  }\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    this._fetchData();\n    loadPersonDetailDialog();\n  }\n\n  private async _fetchData() {\n    this._usersLoad = fetchUsers(this.hass!);\n    const personData = await fetchPersons(this.hass!);\n\n    this._storageItems = personData.storage.sort((ent1, ent2) =>\n      compare(ent1.name, ent2.name)\n    );\n    this._configItems = personData.config.sort((ent1, ent2) =>\n      compare(ent1.name, ent2.name)\n    );\n  }\n\n  private _createPerson() {\n    this._openDialog();\n  }\n\n  private _openEditEntry(ev: MouseEvent) {\n    const entry: Person = (ev.currentTarget! as any).entry;\n    this._openDialog(entry);\n  }\n\n  private _allowedUsers(users: User[], currentPerson?: Person) {\n    const used = new Set();\n    for (const coll of [this._configItems, this._storageItems]) {\n      for (const pers of coll!) {\n        if (pers.user_id) {\n          used.add(pers.user_id);\n        }\n      }\n    }\n    const currentUserId = currentPerson ? currentPerson.user_id : undefined;\n    return users.filter(\n      (user) => user.id === currentUserId || !used.has(user.id)\n    );\n  }\n\n  private async _openDialog(entry?: Person) {\n    const users = await this._usersLoad!;\n\n    showPersonDetailDialog(this, {\n      entry,\n      users: this._allowedUsers(users, entry),\n      createEntry: async (values) => {\n        const created = await createPerson(this.hass!, values);\n        this._storageItems = this._storageItems!.concat(\n          created\n        ).sort((ent1, ent2) => compare(ent1.name, ent2.name));\n      },\n      updateEntry: async (values) => {\n        const updated = await updatePerson(this.hass!, entry!.id, values);\n        this._storageItems = this._storageItems!.map((ent) =>\n          ent === entry ? updated : ent\n        );\n      },\n      removeEntry: async () => {\n        if (\n          !(await showConfirmationDialog(this, {\n            title: this.hass!.localize(\"ui.panel.config.person.confirm_delete\"),\n            text: this.hass!.localize(\"ui.panel.config.person.confirm_delete2\"),\n            dismissText: this.hass!.localize(\"ui.common.no\"),\n            confirmText: this.hass!.localize(\"ui.common.yes\"),\n          }))\n        ) {\n          return false;\n        }\n\n        try {\n          await deletePerson(this.hass!, entry!.id);\n          this._storageItems = this._storageItems!.filter(\n            (ent) => ent !== entry\n          );\n          return true;\n        } catch (err) {\n          return false;\n        }\n      },\n    });\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      a {\n        color: var(--primary-color);\n      }\n      ha-card {\n        max-width: 600px;\n        margin: 16px auto;\n        overflow: hidden;\n      }\n      .empty {\n        text-align: center;\n        padding: 8px;\n      }\n      paper-item {\n        padding-top: 4px;\n        padding-bottom: 4px;\n      }\n      ha-card.storage paper-item {\n        cursor: pointer;\n      }\n      mwc-fab {\n        position: fixed;\n        bottom: 16px;\n        right: 16px;\n        z-index: 1;\n      }\n      mwc-fab[narrow] {\n        bottom: 84px;\n      }\n      mwc-fab[is-wide] {\n        bottom: 24px;\n        right: 24px;\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"ha-config-person\", HaConfigPerson);\n","import { HomeAssistant } from \"../types\";\n\nexport interface Person {\n  id: string;\n  name: string;\n  user_id?: string;\n  device_trackers?: string[];\n}\n\nexport interface PersonMutableParams {\n  name: string;\n  user_id: string | null;\n  device_trackers: string[];\n}\n\nexport const fetchPersons = (hass: HomeAssistant) =>\n  hass.callWS<{\n    storage: Person[];\n    config: Person[];\n  }>({ type: \"person/list\" });\n\nexport const createPerson = (\n  hass: HomeAssistant,\n  values: PersonMutableParams\n) =>\n  hass.callWS<Person>({\n    type: \"person/create\",\n    ...values,\n  });\n\nexport const updatePerson = (\n  hass: HomeAssistant,\n  personId: string,\n  updates: Partial<PersonMutableParams>\n) =>\n  hass.callWS<Person>({\n    type: \"person/update\",\n    person_id: personId,\n    ...updates,\n  });\n\nexport const deletePerson = (hass: HomeAssistant, personId: string) =>\n  hass.callWS({\n    type: \"person/delete\",\n    person_id: personId,\n  });\n"],"sourceRoot":""}