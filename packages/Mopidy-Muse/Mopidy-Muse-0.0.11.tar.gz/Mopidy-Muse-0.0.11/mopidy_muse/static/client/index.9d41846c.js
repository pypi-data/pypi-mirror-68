import{S as a,a as s,s as l,L as n,a3 as c,m as t,k as r,a4 as e,z as o,B as i,g as u,e as f,b as h,t as m,u as d,c as p,d as $,f as g,h as v,v as E,j as b,w as k,l as w,x as y,p as I,r as D,q as V,P,D as T,C as A,I as N,U as C,J as x,R as B,T as O,n as M,A as S,a5 as U,a6 as q,a7 as L,i as R,a8 as j,a9 as H,aa as z,ab as F,ac as J,_,N as G,ad as K,ae as Q,af as W,ag as X}from"./client.fa249440.js";function Y(a){let s,l,n,c={ctx:a,current:null,token:null,pending:na,then:aa,catch:Z,value:10,error:11,blocks:[,,,]};return e(l=a[2],c),{c(){s=t(),c.block.c()},l(a){s=t(),c.block.l(a)},m(a,l){r(a,s,l),c.block.m(a,c.anchor=l),c.mount=(()=>s.parentNode),c.anchor=s,n=!0},p(s,n){if(a=s,c.ctx=a,4&n&&l!==(l=a[2])&&e(l,c));else{const s=a.slice();s[10]=c.resolved,c.block.p(s,n)}},i(a){n||(o(c.block),n=!0)},o(a){for(let a=0;a<3;a+=1){const s=c.blocks[a];i(s)}n=!1},d(a){a&&u(s),c.block.d(a),c.token=null,c=null}}}function Z(a){let s,l=a[11].message+"";return{c(){s=m(l)},l(a){s=v(a,l)},m(a,l){r(a,s,l)},p(a,n){4&n&&l!==(l=a[11].message+"")&&M(s,l)},i:S,o:S,d(a){a&&u(s)}}}function aa(a){let s,l,n,c;const e=[la,sa],f=[];function h(a,s){return a[10]?0:1}return s=h(a),l=f[s]=e[s](a),{c(){l.c(),n=t()},l(a){l.l(a),n=t()},m(a,l){f[s].m(a,l),r(a,n,l),c=!0},p(a,c){let t=s;(s=h(a))===t?f[s].p(a,c):(P(),i(f[t],1,1,()=>{f[t]=null}),T(),(l=f[s])||(l=f[s]=e[s](a)).c(),o(l,1),l.m(n.parentNode,n))},i(a){c||(o(l),c=!0)},o(a){i(l),c=!1},d(a){f[s].d(a),a&&u(n)}}}function sa(a){let s;return{c(){s=m("Error")},l(a){s=v(a,"Error")},m(a,l){r(a,s,l)},p:S,i:S,o:S,d(a){a&&u(s)}}}function la(a){let s,l;const c=new n({props:{icon:q,class:"icon"}});return{c(){s=f("button"),d(c.$$.fragment),this.h()},l(a){s=p(a,"BUTTON",{class:!0});var l=$(s);E(c.$$.fragment,l),l.forEach(u),this.h()},h(){b(s,"class","button")},m(a,n){r(a,s,n),y(c,s,null),l=!0},p:S,i(a){l||(o(c.$$.fragment,a),l=!0)},o(a){i(c.$$.fragment,a),l=!1},d(a){a&&u(s),A(c)}}}function na(a){let s,l;const c=new n({props:{icon:U,spin:!0,class:"icon"}});return{c(){s=f("button"),d(c.$$.fragment),this.h()},l(a){s=p(a,"BUTTON",{class:!0});var l=$(s);E(c.$$.fragment,l),l.forEach(u),this.h()},h(){b(s,"class","button")},m(a,n){r(a,s,n),y(c,s,null),l=!0},p:S,i(a){l||(o(c.$$.fragment,a),l=!0)},o(a){i(c.$$.fragment,a),l=!1},d(a){a&&u(s),A(c)}}}function ca(a){let s,l,t,e,N,C,x,B,O,M,S,U,q,L,R,j,H,z,F,J,_,G,K,Q,W;const X=new n({props:{icon:c,class:"icon"}});let Z=a[2]&&Y(a);return{c(){s=f("div"),l=f("div"),t=h(),e=f("div"),N=f("header"),C=f("p"),x=m("Create playlist"),B=h(),O=f("a"),d(X.$$.fragment),S=h(),U=f("section"),q=f("label"),L=m("Name"),R=h(),j=f("input"),H=h(),z=f("footer"),F=f("button"),J=m("Save changes"),_=h(),Z&&Z.c(),G=h(),K=f("button"),this.h()},l(a){s=p(a,"DIV",{class:!0});var n=$(s);l=p(n,"DIV",{class:!0}),$(l).forEach(u),t=g(n),e=p(n,"DIV",{class:!0});var c=$(e);N=p(c,"HEADER",{class:!0});var r=$(N);C=p(r,"P",{class:!0});var o=$(C);x=v(o,"Create playlist"),o.forEach(u),B=g(r),O=p(r,"A",{href:!0,"aria-label":!0});var i=$(O);E(X.$$.fragment,i),i.forEach(u),r.forEach(u),S=g(c),U=p(c,"SECTION",{class:!0});var f=$(U);q=p(f,"LABEL",{class:!0});var h=$(q);L=v(h,"Name"),h.forEach(u),R=g(f),j=p(f,"INPUT",{class:!0,type:!0,name:!0,id:!0}),f.forEach(u),H=g(c),z=p(c,"FOOTER",{class:!0});var m=$(z);F=p(m,"BUTTON",{class:!0});var d=$(F);J=v(d,"Save changes"),d.forEach(u),_=g(m),Z&&Z.l(m),m.forEach(u),c.forEach(u),G=g(n),K=p(n,"BUTTON",{class:!0,"aria-label":!0}),$(K).forEach(u),n.forEach(u),this.h()},h(){b(l,"class","modal-background"),b(C,"class","modal-card-title"),b(O,"href",M=null),b(O,"aria-label","close"),b(N,"class","modal-card-head"),b(q,"class","label"),b(j,"class","input"),b(j,"type","text"),b(j,"name","playlist name"),b(j,"id","playlist name"),b(U,"class","modal-card-body"),b(F,"class","button is-success"),b(z,"class","modal-card-foot"),b(e,"class","modal-card"),b(K,"class","modal-close is-large"),b(K,"aria-label","close"),b(s,"class","modal"),k(s,"is-active",a[0])},m(n,c,o){r(n,s,c),w(s,l),w(s,t),w(s,e),w(e,N),w(N,C),w(C,x),w(N,B),w(N,O),y(X,O,null),w(e,S),w(e,U),w(U,q),w(q,L),w(U,R),w(U,j),I(j,a[1]),w(e,H),w(e,z),w(z,F),w(F,J),w(z,_),Z&&Z.m(z,null),w(s,G),w(s,K),Q=!0,o&&D(W),W=[V(l,"click",a[6]),V(O,"click",a[7]),V(j,"input",a[8]),V(F,"click",a[3]),V(K,"click",a[9])]},p(a,[l]){2&l&&j.value!==a[1]&&I(j,a[1]),a[2]?Z?(Z.p(a,l),o(Z,1)):((Z=Y(a)).c(),o(Z,1),Z.m(z,null)):Z&&(P(),i(Z,1,1,()=>{Z=null}),T()),1&l&&k(s,"is-active",a[0])},i(a){Q||(o(X.$$.fragment,a),o(Z),Q=!0)},o(a){i(X.$$.fragment,a),i(Z),Q=!1},d(a){a&&u(s),A(X),Z&&Z.d(),D(W)}}}function ta(a,s,l){let n;N(a,C,a=>l(4,n=a));let c,t="",{showCreatePlaylistModal:r}=s;x(async()=>{B(C,n=await O())});const e=async()=>{return!!await n.playlists.create({name:t})&&(setTimeout(()=>{l(0,r=!r)},1500),!0)};return a.$set=(a=>{"showCreatePlaylistModal"in a&&l(0,r=a.showCreatePlaylistModal)}),[r,t,c,()=>{l(2,c=e())},n,e,()=>l(0,r=!r),()=>l(0,r=!r),function(){t=this.value,l(1,t)},()=>l(0,r=!r)]}class ra extends a{constructor(a){super(),s(this,a,ta,ca,l,{showCreatePlaylistModal:0})}}function ea(a,s,l){const n=a.slice();return n[5]=s[l],n[7]=l,n}function oa(a){let s,l,n,c;return{c(){s=f("div"),l=f("p"),n=m("loading"),c=h(),this.h()},l(a){s=p(a,"DIV",{class:!0});var t=$(s);l=p(t,"P",{});var r=$(l);n=v(r,"loading"),r.forEach(u),c=g(t),t.forEach(u),this.h()},h(){b(s,"class","list-item")},m(a,t){r(a,s,t),w(s,l),w(l,n),w(s,c)},d(a){a&&u(s)}}}function ia(a){let s,l=a[9].message+"";return{c(){s=m(l)},l(a){s=v(a,l)},m(a,l){r(a,s,l)},p(a,n){2&n&&l!==(l=a[9].message+"")&&M(s,l)},d(a){a&&u(s)}}}function ua(a){let s,l,n,c=(a[8].tracks?a[8].tracks.length:"0")+"";return{c(){s=m("("),l=m(c),n=m(")")},l(a){s=v(a,"("),l=v(a,c),n=v(a,")")},m(a,c){r(a,s,c),r(a,l,c),r(a,n,c)},p(a,s){2&s&&c!==(c=(a[8].tracks?a[8].tracks.length:"0")+"")&&M(l,c)},d(a){a&&u(s),a&&u(l),a&&u(n)}}}function fa(a){let s;return{c(){s=m("loading..")},l(a){s=v(a,"loading..")},m(a,l){r(a,s,l)},p:S,d(a){a&&u(s)}}}function ha(a){let s,l,c,t,I,P,T,N,C,x,B,O,S,U,q,L,J,W,X,Y,Z,aa,sa,la,na,ca,ta,ra,ea,oa=a[5].name+"",ha={ctx:a,current:null,token:null,pending:fa,then:ua,catch:ia,value:8,error:9};e(N=F(a[5].uri),ha);const ma=new n({props:{icon:_,class:"icon","aria-haspopup":"true","aria-controls":"dropdown-menu"}});function da(...s){return a[4](a[5],...s)}const pa=new n({props:{icon:G,class:"icon is-small"}}),$a=new n({props:{icon:K,class:"icon is-small"}}),ga=new n({props:{icon:Q,class:"icon is-small"}});return{c(){s=f("div"),l=f("div"),c=f("a"),t=m(oa),P=h(),T=f("div"),ha.block.c(),C=h(),x=f("div"),B=f("div"),O=f("div"),d(ma.$$.fragment),S=h(),U=f("div"),q=f("div"),L=f("a"),d(pa.$$.fragment),J=m(" \n                  Play"),X=h(),Y=f("a"),d($a.$$.fragment),Z=m(" \n                  Shuffle"),sa=h(),la=f("a"),d(ga.$$.fragment),na=m(" \n                  Add to queue"),ta=h(),this.h()},l(a){s=p(a,"DIV",{class:!0});var n=$(s);l=p(n,"DIV",{class:!0});var r=$(l);c=p(r,"A",{class:!0,href:!0});var e=$(c);t=v(e,oa),e.forEach(u),P=g(r),T=p(r,"DIV",{class:!0});var o=$(T);ha.block.l(o),o.forEach(u),C=g(r),x=p(r,"DIV",{class:!0});var i=$(x);B=p(i,"DIV",{class:!0});var f=$(B);O=p(f,"DIV",{class:!0});var h=$(O);E(ma.$$.fragment,h),h.forEach(u),S=g(f),U=p(f,"DIV",{class:!0,id:!0,role:!0});var m=$(U);q=p(m,"DIV",{class:!0});var d=$(q);L=p(d,"A",{href:!0,class:!0});var b=$(L);E(pa.$$.fragment,b),J=v(b," \n                  Play"),b.forEach(u),X=g(d),Y=p(d,"A",{href:!0,class:!0});var k=$(Y);E($a.$$.fragment,k),Z=v(k," \n                  Shuffle"),k.forEach(u),sa=g(d),la=p(d,"A",{href:!0,class:!0});var w=$(la);E(ga.$$.fragment,w),na=v(w," \n                  Add to queue"),w.forEach(u),d.forEach(u),m.forEach(u),f.forEach(u),i.forEach(u),r.forEach(u),ta=g(n),n.forEach(u),this.h()},h(){b(c,"class","column"),b(c,"href",I="playlists/"+a[5].slug),b(T,"class","column is-narrow"),b(O,"class","dropdown-trigger"),b(L,"href",W=null),b(L,"class","dropdown-item"),b(Y,"href",aa=null),b(Y,"class","dropdown-item"),b(la,"href",ca=null),b(la,"class","dropdown-item"),b(q,"class","dropdown-content"),b(U,"class","dropdown-menu"),b(U,"id","dropdown-menu"),b(U,"role","menu"),b(B,"class","dropdown is-right is-up"),k(B,"is-active",a[5].visibility),b(x,"class","column is-narrow"),b(l,"class","columns is-mobile"),b(s,"class","list-item")},m(n,e,o){r(n,s,e),w(s,l),w(l,c),w(c,t),w(l,P),w(l,T),ha.block.m(T,ha.anchor=null),ha.mount=(()=>T),ha.anchor=null,w(l,C),w(l,x),w(x,B),w(B,O),y(ma,O,null),w(B,S),w(B,U),w(U,q),w(q,L),y(pa,L,null),w(L,J),w(q,X),w(q,Y),y($a,Y,null),w(Y,Z),w(q,sa),w(q,la),y(ga,la,null),w(la,na),w(s,ta),ra=!0,o&&D(ea),ea=[V(O,"click",da),V(L,"click",function(){R(j(a[5].uri))&&j(a[5].uri).apply(this,arguments)}),V(Y,"click",function(){R(H(a[5].uri))&&H(a[5].uri).apply(this,arguments)}),V(la,"click",function(){R(z(a[5].uri))&&z(a[5].uri).apply(this,arguments)})]},p(s,l){if(a=s,(!ra||2&l)&&oa!==(oa=a[5].name+"")&&M(t,oa),(!ra||2&l&&I!==(I="playlists/"+a[5].slug))&&b(c,"href",I),ha.ctx=a,2&l&&N!==(N=F(a[5].uri))&&e(N,ha));else{const s=a.slice();s[8]=ha.resolved,ha.block.p(s,l)}2&l&&k(B,"is-active",a[5].visibility)},i(a){ra||(o(ma.$$.fragment,a),o(pa.$$.fragment,a),o($a.$$.fragment,a),o(ga.$$.fragment,a),ra=!0)},o(a){i(ma.$$.fragment,a),i(pa.$$.fragment,a),i($a.$$.fragment,a),i(ga.$$.fragment,a),ra=!1},d(a){a&&u(s),ha.block.d(),ha.token=null,ha=null,A(ma),A(pa),A($a),A(ga),D(ea)}}}function ma(a){let s,l,c,t,e,k,I,D,N,C,x,B,O;const M=new n({props:{icon:L,class:"icon"}}),S=new ra({props:{showCreatePlaylistModal:a[0]}});let U=a[1],q=[];for(let s=0;s<U.length;s+=1)q[s]=ha(ea(a,U,s));const R=a=>i(q[a],1,1,()=>{q[a]=null});let j=null;return U.length||(j=oa()),{c(){s=f("div"),l=f("div"),c=f("h1"),t=m("Playlists"),e=h(),k=f("div"),I=f("a"),d(M.$$.fragment),N=h(),d(S.$$.fragment),C=h(),x=f("div");for(let a=0;a<q.length;a+=1)q[a].c();j&&j.c(),this.h()},l(a){s=p(a,"DIV",{class:!0});var n=$(s);l=p(n,"DIV",{class:!0});var r=$(l);c=p(r,"H1",{class:!0});var o=$(c);t=v(o,"Playlists"),o.forEach(u),r.forEach(u),e=g(n),k=p(n,"DIV",{class:!0});var i=$(k);I=p(i,"A",{class:!0,href:!0});var f=$(I);E(M.$$.fragment,f),f.forEach(u),i.forEach(u),n.forEach(u),N=g(a),E(S.$$.fragment,a),C=g(a),x=p(a,"DIV",{class:!0});var h=$(x);for(let a=0;a<q.length;a+=1)q[a].l(h);j&&j.l(h),h.forEach(u),this.h()},h(){b(c,"class","title"),b(l,"class","column"),b(I,"class","button"),b(I,"href",D=null),b(k,"class","column is-narrow"),b(s,"class","columns is-mobile"),b(x,"class","list is-hoverable")},m(n,o,i){r(n,s,o),w(s,l),w(l,c),w(c,t),w(s,e),w(s,k),w(k,I),y(M,I,null),r(n,N,o),y(S,n,o),r(n,C,o),r(n,x,o);for(let a=0;a<q.length;a+=1)q[a].m(x,null);j&&j.m(x,null),B=!0,i&&O(),O=V(I,"click",a[3])},p(a,[s]){const l={};if(1&s&&(l.showCreatePlaylistModal=a[0]),S.$set(l),2&s){let l;for(U=a[1],l=0;l<U.length;l+=1){const n=ea(a,U,l);q[l]?(q[l].p(n,s),o(q[l],1)):(q[l]=ha(n),q[l].c(),o(q[l],1),q[l].m(x,null))}for(P(),l=U.length;l<q.length;l+=1)R(l);T(),U.length?j&&(j.d(1),j=null):j||((j=oa()).c(),j.m(x,null))}},i(a){if(!B){o(M.$$.fragment,a),o(S.$$.fragment,a);for(let a=0;a<U.length;a+=1)o(q[a]);B=!0}},o(a){i(M.$$.fragment,a),i(S.$$.fragment,a),q=q.filter(Boolean);for(let a=0;a<q.length;a+=1)i(q[a]);B=!1},d(a){a&&u(s),A(M),a&&u(N),A(S,a),a&&u(C),a&&u(x),J(q,a),j&&j.d(),O()}}}function da(a,s,l){let n,c;N(a,C,a=>l(2,n=a)),N(a,X,a=>l(1,c=a));let t=!1;x(async()=>{B(C,n=await O()),B(X,c=await W())});return[t,c,n,()=>l(0,t=!t),a=>B(X,a.visibility=!a.visibility,c)]}export default class extends a{constructor(a){super(),s(this,a,da,ma,l,{})}}
